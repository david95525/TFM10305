
@{
    ViewData["Title"] = "ProductOrder";
}

<h1>產品訂單數量分析</h1>

<input type="button" onclick="javascript:location.href='/ProductManage/Index'" value="後台管理" class="alert-primary" />
<input type="button" onclick="javascript:location.href='/ProductManageChart/Index'" value="後台分析" class="alert-success" />

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<div id="Vuechart">
    @*圖表*@
    <canvas id="myChart"></canvas>
</div>

<script>
    var app = new Vue(
        {
            el: '#Vuechart',

            mounted: function () {
                axios('/api/Productsapi/ProductName')
                    .then(response => {
                        data.labels = response.data;
                    })//then(response =>
                //axios
                axios('/api/Productsapi/ProductsQuantity')
                            .then(Quantity => {
                                var Q = Quantity.data;
                                
                                for (var index = 0; index < 7; index++) {
                                    data.datasets[0].data.push(Q[index]);
                                };
                                data.datasets[0].data[4] = 15;
                                data.datasets[0].data[5] = 5;
                                data.datasets[0].data[6] = 10;
                                for (var index = 4; index < 7; index++) {
                                    data.datasets[0].data[index] += 3;
                                };

                                @* 顯示圖表 *@
                                myChart = new Chart(
                                    document.getElementById('myChart'),
                                    config
                                );//顯示圖表

                            })
                        //axios

            },

        }
    )

    var data = {
        labels:'',
        datasets: [
            {
                 label: '訂單數量',
                backgroundColor: 'rgb(0, 128, 140)', //孔雀藍
                 borderColor: 'rgb(255, 99, 132)',
                 data: [],
            },

        ],

    };

    var config = {
        type: 'bar',
        data: data,
        options: {}
    };

</script>